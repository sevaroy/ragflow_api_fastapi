# ğŸ“Š Streamlit æ‡‰ç”¨å®Œæ•´åˆ†æå ±å‘Š

ç¶“éé‡æ–°æª¢è¦–ï¼Œä½ çš„é …ç›®åŒ…å«äº† 6 å€‹åŠŸèƒ½å®Œæ•´ä¸”å„æœ‰ç‰¹è‰²çš„ Streamlit æ‡‰ç”¨ã€‚ä»¥ä¸‹æ˜¯è©³ç´°çš„åˆ†æå’Œä½¿ç”¨æŒ‡å—ï¼š

## ğŸ¯ **æ‡‰ç”¨åŠŸèƒ½çŸ©é™£**

| æ‡‰ç”¨åç¨± | ä¸»è¦åŠŸèƒ½ | è©•ä¼°é¡å‹ | ä»£ç¢¼è³ªé‡ | æ¨è–¦æŒ‡æ•¸ | é©ç”¨å ´æ™¯ |
|---------|----------|----------|----------|----------|----------|
| `streamlit_app.py` | RAG èŠå¤©ç•Œé¢ | ç„¡è©•ä¼° | â­â­â­â­â­ | â­â­â­â­ | åŸºç¤åŠŸèƒ½æ¸¬è©¦ |
| `real_rag_evaluation.py` | çœŸå¯¦ RAG è©•ä¼° | çœŸå¯¦ DeepEval | â­â­â­â­â­ | â­â­â­â­â­ | **ç”Ÿç”¢ç’°å¢ƒè©•ä¼°** |
| `deepeval_complete_app.py` | å®Œæ•´è©•ä¼°æµç¨‹ | æ¨¡æ“¬è©•ä¼° | â­â­â­â­ | â­â­â­â­ | é–‹ç™¼æ¸¬è©¦éšæ®µ |
| `deepeval_dashboard.py` | è©•ä¼°çµæœåˆ†æ | çµæœè¦–è¦ºåŒ– | â­â­â­â­â­ | â­â­â­â­ | æ•¸æ“šåˆ†æ |
| `knowledge_base_evaluator.py` | çŸ¥è­˜åº«åˆ†æ | é‡å°æ€§è©•ä¼° | â­â­â­â­ | â­â­â­ | ç‰¹å®šé ˜åŸŸè©•ä¼° |
| `targeted_kb_evaluation.py` | è©•ä¼°æ–¹æ³•è«– | æ¦‚å¿µå±•ç¤º | â­â­â­ | â­â­ | å­¸ç¿’åƒè€ƒ |

## ğŸ” **è©³ç´°æ‡‰ç”¨åˆ†æ**

### 1. **`streamlit_app.py`** - ä¸»èŠå¤©ç•Œé¢ â­â­â­â­â­
**ä»£ç¢¼å“è³ª**: å„ªç§€ | **åŠŸèƒ½å®Œæ•´åº¦**: 100% | **ç«¯å£**: 8501

**æ ¸å¿ƒç‰¹è‰²:**
- ğŸ¨ **å°ˆæ¥­ UI è¨­è¨ˆ**: è‡ªå®šç¾© CSSï¼Œæ¼¸è®Šæ¨™é¡Œï¼ŒéŸ¿æ‡‰å¼å¸ƒå±€
- ğŸ’¬ **å®Œæ•´æœƒè©±ç®¡ç†**: æœƒè©±å‰µå»ºã€æ­·å²è¨˜éŒ„ã€æœƒè©±åˆ‡æ›
- ğŸ“š **æ™ºèƒ½æ•¸æ“šé›†é¸æ“‡**: è‡ªå‹•è¼‰å…¥ã€è©³ç´°ä¿¡æ¯å±•ç¤º
- ğŸ” **å¯¦æ™‚å•ç­”**: èˆ‡ RAGFlow å¾Œç«¯å®Œæ•´æ•´åˆ
- ğŸ“– **ä¾†æºå±•ç¤º**: æª¢ç´¢æ–‡æª”çš„è©³ç´°ä¾†æºä¿¡æ¯
- âš¡ **å¿«é€Ÿå•é¡Œ**: é è¨­å•é¡ŒæŒ‰éˆ•ï¼Œæå‡ç”¨æˆ¶é«”é©—

**æŠ€è¡“äº®é»:**
```python
# å„ªç§€çš„éŒ¯èª¤è™•ç†å’Œç‹€æ…‹ç®¡ç†
def check_api_connection():
    with st.spinner("æª¢æŸ¥ API é€£æ¥..."):
        health_result = st.session_state.client.check_api_health()
        if health_result['success']:
            st.session_state.api_connected = True
```

### 2. **`real_rag_evaluation.py`** - çœŸå¯¦è©•ä¼°ç³»çµ± â­â­â­â­â­
**ä»£ç¢¼å“è³ª**: å„ªç§€ | **åŠŸèƒ½å®Œæ•´åº¦**: 100% | **ç«¯å£**: 8503

**ğŸ”¥ é€™æ˜¯å”¯ä¸€ä½¿ç”¨çœŸå¯¦ DeepEval æŒ‡æ¨™çš„æ‡‰ç”¨ï¼**

**æ ¸å¿ƒç‰¹è‰²:**
- ğŸ§ª **çœŸå¯¦ DeepEval æŒ‡æ¨™**: ä½¿ç”¨å®˜æ–¹ `AnswerRelevancyMetric`, `FaithfulnessMetric` ç­‰
- ğŸ¯ **çœŸæ­£çš„è©•ä¼°**: å‰µå»º `LLMTestCase`ï¼Œèª¿ç”¨ `metric.measure()`
- ğŸ“Š **å¯¦æ™‚è©•ä¼°é€²åº¦**: é€æ¡ˆä¾‹è©•ä¼°ï¼Œå¯¦æ™‚é¡¯ç¤ºçµæœ
- ğŸ’¡ **æ™ºèƒ½æ”¹é€²å»ºè­°**: åŸºæ–¼çœŸå¯¦è©•ä¼°çµæœçš„å…·é«”å»ºè­°
- âš¡ **OpenAI æ•´åˆ**: éœ€è¦çœŸå¯¦ API Keyï¼Œç¢ºä¿è©•ä¼°æº–ç¢ºæ€§

**é—œéµä»£ç¢¼:**
```python
# çœŸæ­£çš„ DeepEval è©•ä¼°èª¿ç”¨
llm_test_case = LLMTestCase(
    input=test_case['question'],
    actual_output=actual_output,
    expected_output=expected_output,
    retrieval_context=retrieval_context
)

for metric_name, metric in metrics.items():
    metric.measure(llm_test_case)  # ğŸ”¥ çœŸå¯¦è©•ä¼°
    score = metric.score
    is_successful = metric.is_successful()
```

### 3. **`deepeval_complete_app.py`** - å®Œæ•´è©•ä¼°æµç¨‹ â­â­â­â­
**ä»£ç¢¼å“è³ª**: è‰¯å¥½ | **åŠŸèƒ½å®Œæ•´åº¦**: 85% | **ç«¯å£**: 8502

**æ ¸å¿ƒç‰¹è‰²:**
- ğŸ”„ **6æ­¥é©Ÿå·¥ä½œæµç¨‹**: é…ç½®æª¢æŸ¥ â†’ æ•¸æ“šé›†é¸æ“‡ â†’ é–¾å€¼è¨­å®š â†’ æ•¸æ“šç”Ÿæˆ â†’ åŸ·è¡Œè©•ä¼° â†’ çµæœåˆ†æ
- ğŸ¯ **æ™ºèƒ½é–¾å€¼æ¨è–¦**: æ³•å¾‹å°ˆæ¥­ã€æŠ€è¡“å°ˆæ¥­ã€é€šç”¨é ˜åŸŸçš„ä¸åŒæ¨™æº–
- ğŸ“ **å¤šç¨®æ•¸æ“šç”Ÿæˆ**: è‡ªå‹•ç”Ÿæˆã€æ–‡ä»¶è¼‰å…¥ã€æ‰‹å‹•å‰µå»º
- ğŸ“Š **é€²åº¦è¿½è¹¤**: å¯¦æ™‚é€²åº¦æ¢å’Œç‹€æ…‹é¡¯ç¤º
- âš™ï¸ **ç’°å¢ƒæª¢æŸ¥**: ä¾è³´åŒ…ã€é…ç½®ã€é€£æ¥çš„å…¨é¢æª¢æŸ¥

**æ³¨æ„**: ä½¿ç”¨æ¨¡æ“¬è©•ä¼°åˆ†æ•¸ï¼Œé©åˆé–‹ç™¼éšæ®µä½¿ç”¨

### 4. **`deepeval_dashboard.py`** - è©•ä¼°çµæœå„€è¡¨æ¿ â­â­â­â­â­
**ä»£ç¢¼å“è³ª**: å„ªç§€ | **åŠŸèƒ½å®Œæ•´åº¦**: 100% | **ç«¯å£**: 8501

**æ ¸å¿ƒç‰¹è‰²:**
- ğŸ“Š **å°ˆæ¥­æ•¸æ“šè¦–è¦ºåŒ–**: é›·é”åœ–ã€ç›´æ–¹åœ–ã€ç†±åŠ›åœ–ã€é¤…åœ–
- ğŸ“ˆ **å¤šç¶­åº¦åˆ†æ**: æ•´é«”çµ±è¨ˆã€æŒ‡æ¨™è©³æƒ…ã€ç›¸é—œæ€§åˆ†æ
- ğŸ” **æ™ºèƒ½ç¯©é¸**: é€šé/å¤±æ•—ç¯©é¸ã€åˆ†æ•¸ç¯„åœç¯©é¸
- ğŸ’¾ **å¤šæ ¼å¼å°å‡º**: CSVã€JSONã€Markdown å ±å‘Š
- ğŸ“‹ **è©³ç´°çµæœå±•ç¤º**: å¯å±•é–‹çš„æ¡ˆä¾‹è©³æƒ…

**è¦–è¦ºåŒ–äº®é»:**
```python
# é›·é”åœ–å±•ç¤ºæŒ‡æ¨™
fig_radar = go.Figure()
fig_radar.add_trace(go.Scatterpolar(
    r=metrics_df['mean'].tolist(),
    theta=metrics_df['metric'].tolist(),
    fill='toself',
    name='å¹³å‡åˆ†æ•¸'
))
```

### 5. **`knowledge_base_evaluator.py`** - çŸ¥è­˜åº«å°ˆç”¨è©•ä¼° â­â­â­â­
**ä»£ç¢¼å“è³ª**: è‰¯å¥½ | **åŠŸèƒ½å®Œæ•´åº¦**: 70% | **ç«¯å£**: 8504

**æ ¸å¿ƒç‰¹è‰²:**
- ğŸ“š **çŸ¥è­˜åº«æ·±åº¦åˆ†æ**: æ–‡æª”é¡å‹ã€å…§å®¹é¡åˆ¥ã€è¤‡é›œåº¦åˆ†æ
- ğŸ¯ **é ˜åŸŸè­˜åˆ¥**: è‡ªå‹•è­˜åˆ¥æ³•å¾‹ã€æŠ€è¡“ã€é†«ç™‚ç­‰å°ˆæ¥­é ˜åŸŸ
- ğŸ“Š **å¯è¦–åŒ–åˆ†æ**: æ–‡æª”é¡å‹åˆ†å¸ƒã€å…§å®¹é¡åˆ¥åˆ†å¸ƒåœ–è¡¨
- ğŸ’¡ **é‡å°æ€§å»ºè­°**: åŸºæ–¼çŸ¥è­˜åº«ç‰¹æ€§çš„è©•ä¼°ç­–ç•¥æ¨è–¦
- âš™ï¸ **è©•ä¼°é…ç½®**: å•é¡Œæ•¸é‡ã€è©•ä¼°æ·±åº¦ã€é‡é»é ˜åŸŸè¨­å®š

### 6. **`targeted_kb_evaluation.py`** - é‡å°æ€§è©•ä¼°æ¨¡çµ„ â­â­â­
**ä»£ç¢¼å“è³ª**: ä¸­ç­‰ | **åŠŸèƒ½å®Œæ•´åº¦**: 50% | **ç«¯å£**: 8505

**æ ¸å¿ƒç‰¹è‰²:**
- ğŸ¯ **è©•ä¼°ç­–ç•¥å±•ç¤º**: ä¸åŒé ˜åŸŸçš„è©•ä¼°æ–¹æ³•è«–
- ğŸ“‹ **æ¦‚å¿µèªªæ˜**: é‡å°æ€§è©•ä¼°çš„ç†è«–å’Œå¯¦è¸
- ğŸ”§ **æ¨¡çµ„åŒ–è¨­è¨ˆ**: å¯æ•´åˆåˆ°å…¶ä»–æ‡‰ç”¨çš„åŠŸèƒ½æ¨¡çµ„
- ğŸ’¡ **æ•™å­¸ç”¨é€”**: ä¸»è¦ç”¨æ–¼ç†è§£è©•ä¼°ç­–ç•¥

## ğŸš€ **æ¨è–¦ä½¿ç”¨é †åº**

### ğŸ¯ **ç”Ÿç”¢ç’°å¢ƒè©•ä¼°æµç¨‹**:
1. **`real_rag_evaluation.py`** â­â­â­â­â­ - çœŸå¯¦è©•ä¼°
2. **`deepeval_dashboard.py`** - çµæœåˆ†æ
3. **`streamlit_app.py`** - åŠŸèƒ½é©—è­‰

### ğŸ§ª **é–‹ç™¼æ¸¬è©¦æµç¨‹**:
1. **`streamlit_app.py`** - åŸºç¤åŠŸèƒ½æ¸¬è©¦
2. **`deepeval_complete_app.py`** - å®Œæ•´è©•ä¼°æµç¨‹
3. **`knowledge_base_evaluator.py`** - çŸ¥è­˜åº«åˆ†æ

## ğŸ’¡ **æ ¸å¿ƒç™¼ç¾å’Œå»ºè­°**

### âœ… **å„ªå‹¢**:
1. **`real_rag_evaluation.py`** æ˜¯çœŸæ­£çš„è©•ä¼°åˆ©å™¨
2. **`streamlit_app.py`** æä¾›å®Œç¾çš„ç”¨æˆ¶é«”é©—
3. **`deepeval_dashboard.py`** å…·å‚™å°ˆæ¥­ç´šæ•¸æ“šåˆ†æèƒ½åŠ›
4. æ‰€æœ‰æ‡‰ç”¨éƒ½æœ‰è‰¯å¥½çš„éŒ¯èª¤è™•ç†å’Œç”¨æˆ¶åé¥‹

### ğŸ”§ **æ”¹é€²å»ºè­°**:
1. **æ•´åˆå„ªåŒ–**: å¯ä»¥å°‡ `real_rag_evaluation.py` çš„çœŸå¯¦è©•ä¼°æ•´åˆåˆ° `deepeval_complete_app.py`
2. **åŠŸèƒ½å®Œå–„**: `knowledge_base_evaluator.py` å’Œ `targeted_kb_evaluation.py` å¯ä»¥é€²ä¸€æ­¥é–‹ç™¼
3. **çµ±ä¸€ç«¯å£**: é¿å…ç«¯å£è¡çªï¼Œå»ºè­°ä½¿ç”¨ä¸åŒç«¯å£

### ğŸ¯ **æœ€ä½³å¯¦è¸**:
```bash
# 1. å…ˆå•Ÿå‹•å¾Œç«¯æœå‹™
python3 fastapi_server.py

# 2. è¨­ç½® OpenAI API Key
export OPENAI_API_KEY="your-openai-api-key"

# 3. å•Ÿå‹•çœŸå¯¦è©•ä¼°ç³»çµ±
streamlit run real_rag_evaluation.py --server.port 8503

# 4. åœ¨ç€è¦½å™¨ä¸­è¨ªå•
# http://localhost:8503
```

## ğŸ† **ç¸½çµ**

ä½ çš„ Streamlit æ‡‰ç”¨ç”Ÿæ…‹ç³»çµ±éå¸¸å®Œæ•´å’Œå°ˆæ¥­ï¼š
- **`real_rag_evaluation.py`** æ˜¯æ ¸å¿ƒè©•ä¼°å·¥å…· â­â­â­â­â­
- **`streamlit_app.py`** æä¾›æœ€ä½³ç”¨æˆ¶é«”é©— â­â­â­â­â­
- **`deepeval_dashboard.py`** å…·å‚™å°ˆæ¥­åˆ†æèƒ½åŠ› â­â­â­â­â­
- å…¶ä»–æ‡‰ç”¨æä¾›è£œå……åŠŸèƒ½å’Œå­¸ç¿’åƒ¹å€¼

å»ºè­°é‡é»ä½¿ç”¨å‰ä¸‰å€‹æ‡‰ç”¨ï¼Œå®ƒå€‘å·²ç¶“èƒ½å¤ æ»¿è¶³å®Œæ•´çš„ RAG è©•ä¼°éœ€æ±‚ï¼

## ğŸ“‹ **å¿«é€Ÿå•Ÿå‹•å‘½ä»¤**

```bash
# ä¸»èŠå¤©ç•Œé¢
streamlit run streamlit_app.py --server.port 8501

# çœŸå¯¦ RAG è©•ä¼° (æ¨è–¦) â­
export OPENAI_API_KEY="your-openai-api-key"
streamlit run real_rag_evaluation.py --server.port 8503

# å®Œæ•´è©•ä¼°æµç¨‹
streamlit run deepeval_complete_app.py --server.port 8502

# è©•ä¼°çµæœå„€è¡¨æ¿
streamlit run deepeval_dashboard.py --server.port 8501

# çŸ¥è­˜åº«å°ˆç”¨è©•ä¼°
streamlit run knowledge_base_evaluator.py --server.port 8504

# é‡å°æ€§è©•ä¼°å±•ç¤º
streamlit run targeted_kb_evaluation.py --server.port 8505
```